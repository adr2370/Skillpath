<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title></title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width">
		<link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
		<link rel="stylesheet" href="css/bootstrap-responsive.min.css" type="text/css">
	</head>
	<body>
		<div style="position: absolute; right: 0px; top: 0px; height: 100%; width: 20%; background-color: grey;">
			<div style="float: left; margin-left: 10px; margin-top: 10px;">
				<img id="photo" src="">
			</div>
			<div id="name" style="float: left; margin-left: 10px; margin-top: 26px; font-size: 18px;">
			</div>
			<div style="float: left; margin-left: 10px; margin-top: 10px; clear: both;">
				<input placeholder="Search..." style=" width: 222px;">
			</div>
			<div style="float: left; margin-left: 10px; margin-top: 10px; clear: both;">
				My Categories
			</div>
			<div id="categories" style="float: left; margin-left: 10px; margin-top: 10px; clear: both;">
			</div>
			<div style="float: left; margin-left: 10px; margin-top: 10px; clear: both;">
				Goals
			</div>
			<div id="goals" style="float: left; margin-left: 10px; margin-top: 10px; clear: both;">
			</div>
		</div>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
		<script src='//cdn.firebase.com/v0/firebase.js'></script>
		<script src="js/fireFunctions.js" type="text/javascript"></script>
		<script>
			var userid;
			function init() {
				var userfb=fb.child("user").child(user);
				userfb.child("name").on("value", function(data) {
					$("#name").text(data.val());
				});
				userfb.child("photo").on("value", function(data) {
					$("#photo").src(data.val());
				});
				userfb.child("categories").on("child_added", function(data) {
					$("#categories").append(data.name());
				});
				userfb.child("goals").on("child_added", function(data) {
					$("#goals").append(data.name());
				});
			}
			var authClient = new FirebaseAuthClient(fb, function(error, user) {
				if (error) {
					console.log(error);
				} else if (user) {
					userid = user.id;
					var name = user.name,
					photo = 'https://graph.facebook.com/'+user.id+'/picture?type=large',
					email = user.email;
					addUser(userid,name,photo,email);
					init();
				} else {
					console.log('not logged in');
					window.location.href='index.html';
				}
			});
			$(document).ready(function() {
				authClient.login('facebook', {
					scope: 'email'
				});
			});
		</script>
	</body>
</html>
